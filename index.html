
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>九九乘法表挑戰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e1f1ff 100%);
            min-height: 100vh;
        }
        
        .card {
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            border-radius: 50%;
            animation: fall 3s ease-out forwards;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="p-4">
    <div class="max-w-4xl mx-auto">
        <div class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-700 mb-2">九九乘法表挑戰</h1>
            <p class="text-gray-600">測試你的乘法技能！選擇正確答案獲得分數。</p>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <div class="text-lg font-medium">難度：
                    <select id="difficulty" class="ml-2 p-1 border rounded bg-blue-50">
                        <option value="easy">簡單 (1-5)</option>
                        <option value="medium" selected>中等 (1-9)</option>
                        <option value="hard">困難 (全部)</option>
                    </select>
                </div>
                <div class="flex items-center">
                    <span class="mr-2">時間：</span>
                    <span id="timer" class="text-xl font-bold text-blue-600">60</span>
                    <span class="ml-1">秒</span>
                </div>
                <div>
                    <span class="mr-2">分數：</span>
                    <span id="score" class="text-xl font-bold text-green-600">0</span>
                </div>
            </div>
            
            <div id="question-container" class="text-center py-8">
                <div class="text-4xl md:text-6xl font-bold text-blue-800 mb-6">
                    <span id="num1">3</span> × <span id="num2">4</span> = ?
                </div>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- 答案選項會在這裡動態生成 -->
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h2 class="text-xl font-bold text-blue-700 mb-4">九九乘法表</h2>
            <div class="overflow-x-auto">
                <table class="w-full border-collapse">
                    <tbody id="multiplication-table" class="text-center">
                        <!-- 乘法表會在這裡動態生成 -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- 結果彈窗 -->
        <div id="result-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl p-8 max-w-md w-full text-center">
                <h2 class="text-2xl font-bold mb-4">挑戰結束！</h2>
                <p class="text-lg mb-2">你的最終分數：<span id="final-score" class="font-bold text-green-600">0</span></p>
                <p class="text-lg mb-6">答對題數：<span id="correct-answers" class="font-bold text-blue-600">0</span></p>
                <button id="restart-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition">
                    再玩一次
                </button>
            </div>
        </div>
    </div>

    <script>
        // 初始化變數
        let score = 0;
        let timer = 60;
        let timerInterval;
        let correctAnswers = 0;
        let totalQuestions = 0;
        let currentAnswer = 0;
        
        // DOM 元素
        const scoreElement = document.getElementById('score');
        const timerElement = document.getElementById('timer');
        const num1Element = document.getElementById('num1');
        const num2Element = document.getElementById('num2');
        const questionContainer = document.getElementById('question-container');
        const difficultySelect = document.getElementById('difficulty');
        const resultModal = document.getElementById('result-modal');
        const finalScoreElement = document.getElementById('final-score');
        const correctAnswersElement = document.getElementById('correct-answers');
        const restartBtn = document.getElementById('restart-btn');
        
        // 生成乘法表
        function generateMultiplicationTable() {
            const table = document.getElementById('multiplication-table');
            table.innerHTML = '';
            
            // 表頭行
            const headerRow = document.createElement('tr');
            headerRow.innerHTML = '<td class="border border-gray-300 bg-blue-100 p-2 font-bold">×</td>';
            for (let i = 1; i <= 9; i++) {
                headerRow.innerHTML += `<td class="border border-gray-300 bg-blue-100 p-2 font-bold">${i}</td>`;
            }
            table.appendChild(headerRow);
            
            // 表格內容
            for (let i = 1; i <= 9; i++) {
                const row = document.createElement('tr');
                row.innerHTML = `<td class="border border-gray-300 bg-blue-100 p-2 font-bold">${i}</td>`;
                
                for (let j = 1; j <= 9; j++) {
                    const result = i * j;
                    row.innerHTML += `<td class="border border-gray-300 p-2 hover:bg-blue-50">${i} × ${j} = ${result}</td>`;
                }
                
                table.appendChild(row);
            }
        }
        
        // 生成新問題
        function generateQuestion() {
            const difficulty = difficultySelect.value;
            let maxNum;
            
            switch (difficulty) {
                case 'easy':
                    maxNum = 5;
                    break;
                case 'medium':
                    maxNum = 9;
                    break;
                case 'hard':
                    maxNum = 9;
                    break;
                default:
                    maxNum = 9;
            }
            
            const num1 = Math.floor(Math.random() * maxNum) + 1;
            const num2 = Math.floor(Math.random() * maxNum) + 1;
            
            num1Element.textContent = num1;
            num2Element.textContent = num2;
            
            currentAnswer = num1 * num2;
            
            // 生成答案選項
            generateAnswerOptions(currentAnswer, maxNum);
            
            totalQuestions++;
        }
        
        // 生成答案選項
        function generateAnswerOptions(correctAnswer, maxNum) {
            const optionsContainer = questionContainer.querySelector('.grid');
            optionsContainer.innerHTML = '';
            
            // 創建包含正確答案的選項數組
            const options = [correctAnswer];
            
            // 添加3個不同的錯誤選項
            while (options.length < 4) {
                const wrongAnswer = Math.floor(Math.random() * (maxNum * maxNum)) + 1;
                if (!options.includes(wrongAnswer)) {
                    options.push(wrongAnswer);
                }
            }
            
            // 打亂選項順序
            shuffleArray(options);
            
            // 創建選項按鈕
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'card bg-blue-50 hover:bg-blue-100 p-4 rounded-lg text-xl font-bold';
                button.textContent = option;
                button.addEventListener('click', () => checkAnswer(option));
                optionsContainer.appendChild(button);
            });
        }
        
        // 檢查答案
        function checkAnswer(selectedAnswer) {
            if (selectedAnswer === currentAnswer) {
                // 答對
                score += 10;
                scoreElement.textContent = score;
                correctAnswers++;
                
                // 創建煙花效果
                createConfetti();
                
                // 顯示正確提示
                showFeedback(true);
            } else {
                // 答錯
                showFeedback(false);
            }
            
            // 生成新問題
            setTimeout(generateQuestion, 800);
        }
        
        // 顯示答題反饋
        function showFeedback(isCorrect) {
            const feedback = document.createElement('div');
            feedback.className = `absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 
                                text-4xl font-bold p-4 rounded-lg ${isCorrect ? 'text-green-500' : 'text-red-500'}`;
            feedback.textContent = isCorrect ? '✓ 正確!' : '✗ 錯誤!';
            feedback.style.zIndex = '10';
            feedback.style.pointerEvents = 'none';
            feedback.style.animation = 'fadeOut 0.8s forwards';
            
            document.body.appendChild(feedback);
            
            setTimeout(() => {
                document.body.removeChild(feedback);
            }, 800);
        }
        
        // 創建煙花效果
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = `${Math.random() * 2 + 1}s`;
                
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    document.body.removeChild(confetti);
                }, 3000);
            }
        }
        
        // 開始計時器
        function startTimer() {
            clearInterval(timerInterval);
            timer = 60;
            timerElement.textContent = timer;
            
            timerInterval = setInterval(() => {
                timer--;
                timerElement.textContent = timer;
                
                if (timer <= 0) {
                    clearInterval(timerInterval);
                    endGame();
                }
            }, 1000);
        }
        
        // 結束遊戲
        function endGame() {
            clearInterval(timerInterval);
            resultModal.classList.remove('hidden');
            finalScoreElement.textContent = score;
            correctAnswersElement.textContent = `${correctAnswers}/${totalQuestions}`;
        }
        
        // 重新開始遊戲
        function restartGame() {
            score = 0;
            correctAnswers = 0;
            totalQuestions = 0;
            scoreElement.textContent = score;
            resultModal.classList.add('hidden');
            startTimer();
            generateQuestion();
        }
        
        // 打亂數組
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        // 初始化
        window.addEventListener('DOMContentLoaded', () => {
            generateMultiplicationTable();
            generateQuestion();
            startTimer();
            
            // 事件監聽器
            difficultySelect.addEventListener('change', generateQuestion);
            restartBtn.addEventListener('click', restartGame);
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93533d968350a343',t:'MTc0NTQ3Mjk2MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
