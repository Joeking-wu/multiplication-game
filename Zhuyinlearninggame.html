<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¨éŸ³ç¬¦è™Ÿè½åŠ›éŠæˆ²</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* å¼•å…¥ Nunito å­—é«” */
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f9ff;
            min-height: 100vh;
        }

        /* æ³¨éŸ³ç¬¦è™Ÿå¡ç‰‡æ¨£å¼èˆ‡å‹•ç•« */
        .symbol-card {
            transition: all 0.3s ease;
            cursor: pointer;
            user-select: none;
        }

            .symbol-card:hover {
                transform: translateY(-5px);
            }

            .symbol-card.correct {
                background-color: #86efac !important;
                animation: bounce 0.5s;
            }

            .symbol-card.incorrect {
                background-color: #fca5a5 !important;
                animation: shake 0.5s;
            }

        /* å½ˆè·³å‹•ç•« */
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        /* æ™ƒå‹•å‹•ç•« */
        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        /* é€²åº¦æ¢æ¨£å¼ */
        .progress-bar {
            transition: width 0.5s ease;
        }

        /* æ˜Ÿæ˜Ÿæ¨£å¼ */
        .star {
            display: inline-block;
            opacity: 0.3;
            transition: all 0.3s ease;
        }

            .star.earned {
                opacity: 1;
                transform: scale(1.2);
            }

        /* äº”å½©ç´™å±‘æ¨£å¼èˆ‡å‹•ç•« */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
        }

        /* ç´™å±‘ä¸‹è½å‹•ç•« */
        @keyframes fall {
            0% {
                transform: translateY(-100px);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        /* é—œå¡æŒ‰éˆ•æ¨£å¼ */
        .level-button {
            transition: all 0.3s ease;
        }

            .level-button:hover:not(.locked) {
                transform: scale(1.05);
            }

        .locked {
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* è§’è‰²å®¹å™¨ */
        .character-container {
            position: relative;
            width: 100px;
            height: 100px;
        }

        .character {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            transition: all 0.5s ease;
        }

        /* è§’è‰²å°è©±æ¡†æ¨£å¼ */
        .speech-bubble {
            position: absolute;
            background-color: white;
            border-radius: 20px;
            padding: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s ease;
            width: 120px;
            text-align: center;
        }

            .speech-bubble:after {
                content: '';
                position: absolute;
                bottom: -10px;
                left: 50%;
                transform: translateX(-50%);
                border-width: 10px 10px 0;
                border-style: solid;
                border-color: white transparent transparent;
            }

        /* è²æ³¢å‹•ç•« */
        .sound-wave {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 60px;
        }

            .sound-wave span {
                display: inline-block;
                width: 6px;
                height: 30px;
                margin: 0 2px;
                background-color: #6366f1;
                border-radius: 3px;
                animation: sound-wave 1s infinite ease-in-out;
            }

                .sound-wave span:nth-child(2) {
                    animation-delay: 0.1s;
                }

                .sound-wave span:nth-child(3) {
                    animation-delay: 0.2s;
                }

                .sound-wave span:nth-child(4) {
                    animation-delay: 0.3s;
                }

                .sound-wave span:nth-child(5) {
                    animation-delay: 0.4s;
                }

        @keyframes sound-wave {
            0%, 100% {
                height: 10px;
            }

            50% {
                height: 40px;
            }
        }

        /* æ’­æ”¾æŒ‰éˆ•çš„æ¼£æ¼ªæ•ˆæœ */
        .sound-button {
            position: relative;
            overflow: hidden;
        }

            .sound-button:after {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 5px;
                height: 5px;
                background: rgba(255, 255, 255, 0.5);
                opacity: 0;
                border-radius: 100%;
                transform: scale(1, 1) translate(-50%);
                transform-origin: 50% 50%;
            }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }

            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        .sound-button:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }

        /* å˜´å·´å‹•ç•« */
        .mouth {
            transition: all 0.3s ease;
        }

            .mouth.speaking {
                animation: speak 0.5s infinite alternate;
            }

        @keyframes speak {
            0% {
                transform: scaleY(0.5);
            }

            100% {
                transform: scaleY(1);
            }
        }
    </style>
</head>
<body class="bg-gradient-to-b from-blue-100 to-purple-100">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-indigo-700 mb-2">æ³¨éŸ³ç¬¦è™Ÿè½åŠ›éŠæˆ²</h1>
            <p class="text-lg text-indigo-600">å°å­¸ä¸€å¹´ç´šæ³¨éŸ³ç¬¦è™Ÿå­¸ç¿’éŠæˆ²</p>
        </div>

        <div id="game-container" class="bg-white rounded-2xl shadow-xl p-6 relative overflow-hidden">
            <div id="start-screen" class="text-center py-10">
                <div class="mb-8">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="w-40 h-40 mx-auto">
                        <circle cx="100" cy="90" r="70" fill="#FFD1D1" />
                        <circle cx="70" cy="80" r="10" fill="#333" />
                        <circle cx="130" cy="80" r="10" fill="#333" />
                        <path d="M70 120c10 20 50 20 60 0" stroke="#333" stroke-width="3" fill="none" stroke-linecap="round" class="mouth" />
                        <path d="M40 50 C 50 30, 70 20, 100 20 C 130 20, 150 30, 160 50" stroke="#FF9999" stroke-width="5" fill="none" stroke-linecap="round" />
                    </svg>
                </div>
                <h2 class="text-2xl font-bold text-indigo-800 mb-6">æ­¡è¿ä¾†åˆ°æ³¨éŸ³ç¬¦è™Ÿè½åŠ›éŠæˆ²ï¼</h2>
                <p class="text-lg text-gray-700 mb-8">è½ä¸€è½ï¼Œé¸ä¸€é¸ï¼Œå­¸ç¿’æ³¨éŸ³ç¬¦è™Ÿå§ï¼</p>
                <button id="start-button" class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-xl font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
                    é–‹å§‹éŠæˆ²
                </button>
            </div>

            <div id="level-select" class="hidden">
                <h2 class="text-2xl font-bold text-indigo-800 mb-6 text-center">é¸æ“‡é—œå¡</h2>

                <div class="character-container mx-auto mb-6">
                    <div class="character">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="w-24 h-24">
                            <circle cx="50" cy="40" r="30" fill="#FFD1D1" />
                            <circle cx="40" cy="35" r="5" fill="#333" />
                            <circle cx="60" cy="35" r="5" fill="#333" />
                            <path d="M40 50c5 8 20 8 25 0" stroke="#333" stroke-width="2" fill="none" stroke-linecap="round" class="mouth" />
                        </svg>
                        <div class="speech-bubble" id="guide-speech">é¸æ“‡ä¸€å€‹é—œå¡é–‹å§‹å§ï¼</div>
                    </div>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-8">
                    <div class="level-button bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl p-4 shadow-md text-center cursor-pointer" data-level="1">
                        <div class="text-3xl mb-2">ğŸ§</div>
                        <h3 class="font-bold text-blue-800">ç¬¬ä¸€é—œ</h3>
                        <p class="text-sm text-blue-700">ã„…ã„†ã„‡ã„ˆ</p>
                        <div class="mt-2 flex justify-center">
                            <span class="star earned text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                        </div>
                    </div>

                    <div class="level-button bg-gradient-to-br from-green-100 to-green-200 rounded-xl p-4 shadow-md text-center cursor-pointer" data-level="2">
                        <div class="text-3xl mb-2">ğŸ§</div>
                        <h3 class="font-bold text-green-800">ç¬¬äºŒé—œ</h3>
                        <p class="text-sm text-green-700">ã„‰ã„Šã„‹ã„Œ</p>
                        <div class="mt-2 flex justify-center">
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                        </div>
                    </div>

                    <div class="level-button bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl p-4 shadow-md text-center cursor-pointer" data-level="3">
                        <div class="text-3xl mb-2">ğŸ§</div>
                        <h3 class="font-bold text-purple-800">ç¬¬ä¸‰é—œ</h3>
                        <p class="text-sm text-purple-700">ã„ã„ã„</p>
                        <div class="mt-2 flex justify-center">
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                        </div>
                    </div>

                    <div class="level-button locked bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl p-4 shadow-md text-center" data-level="4">
                        <div class="text-3xl mb-2">ğŸ”’</div>
                        <h3 class="font-bold text-gray-800">ç¬¬å››é—œ</h3>
                        <p class="text-sm text-gray-700">ã„ã„‘ã„’</p>
                        <div class="mt-2 flex justify-center">
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                        </div>
                    </div>

                    <div class="level-button locked bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl p-4 shadow-md text-center" data-level="5">
                        <div class="text-3xl mb-2">ğŸ”’</div>
                        <h3 class="font-bold text-gray-800">ç¬¬äº”é—œ</h3>
                        <p class="text-sm text-gray-700">ã„“ã„”ã„•ã„–</p>
                        <div class="mt-2 flex justify-center">
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                        </div>
                    </div>

                    <div class="level-button locked bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl p-4 shadow-md text-center" data-level="6">
                        <div class="text-3xl mb-2">ğŸ”’</div>
                        <h3 class="font-bold text-gray-800">ç¬¬å…­é—œ</h3>
                        <p class="text-sm text-gray-700">ã„—ã„˜ã„™</p>
                        <div class="mt-2 flex justify-center">
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                        </div>
                    </div>

                    <div class="level-button locked bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl p-4 shadow-md text-center" data-level="7">
                        <div class="text-3xl mb-2">ğŸ”’</div>
                        <h3 class="font-bold text-gray-800">ç¬¬ä¸ƒé—œ</h3>
                        <p class="text-sm text-gray-700">ã„šã„›ã„œ</p>
                        <div class="mt-2 flex justify-center">
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                        </div>
                    </div>

                    <div class="level-button locked bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl p-4 shadow-md text-center" data-level="8">
                        <div class="text-3xl mb-2">ğŸ”’</div>
                        <h3 class="font-bold text-gray-800">ç¬¬å…«é—œ</h3>
                        <p class="text-sm text-gray-700">ã„ã„ã„Ÿã„ ã„¡</p>
                        <div class="mt-2 flex justify-center">
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                        </div>
                    </div>

                    <div class="level-button locked bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl p-4 shadow-md text-center" data-level="9">
                        <div class="text-3xl mb-2">ğŸ”’</div>
                        <h3 class="font-bold text-gray-800">ç¬¬ä¹é—œ</h3>
                        <p class="text-sm text-gray-700">ã„¢ã„£ã„¤ã„¥ã„¦ã„§ã„¨ã„©</p>
                        <div class="mt-2 flex justify-center">
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                            <span class="star text-yellow-400 text-xl">â˜…</span>
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <button id="back-to-start" class="bg-gray-200 text-gray-700 font-bold py-2 px-6 rounded-full hover:bg-gray-300 transition-all duration-300">
                        è¿”å›é¦–é 
                    </button>
                </div>
            </div>

            <div id="game-screen" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <button id="back-to-levels" class="bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-full hover:bg-gray-300 transition-all duration-300 flex items-center">
                        <span class="mr-1">â†</span> è¿”å›
                    </button>
                    <div class="text-center">
                        <h2 id="level-title" class="text-xl font-bold text-indigo-800">ç¬¬ä¸€é—œï¼šã„…ã„†ã„‡ã„ˆ</h2>
                        <div class="flex justify-center mt-1">
                            <div id="level-stars" class="flex">
                                <span class="star text-yellow-400 text-xl mx-1">â˜…</span>
                                <span class="star text-yellow-400 text-xl mx-1">â˜…</span>
                                <span class="star text-yellow-400 text-xl mx-1">â˜…</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-200 rounded-full px-4 py-2">
                        <span id="score-display" class="font-bold text-indigo-800">0</span>
                        <span class="text-indigo-800">åˆ†</span>
                    </div>
                </div>

                <div class="w-full bg-gray-200 rounded-full h-4 mb-6">
                    <div id="progress-bar" class="bg-gradient-to-r from-green-400 to-blue-500 h-4 rounded-full progress-bar" style="width: 0%"></div>
                </div>

                <div class="mb-8">
                    <div class="text-center mb-4">
                        <h3 class="text-lg text-gray-700">è«‹è½ç™¼éŸ³ï¼Œé¸å‡ºæ­£ç¢ºçš„æ³¨éŸ³ç¬¦è™Ÿï¼š</h3>
                    </div>
                    <div id="question-display" class="bg-indigo-100 rounded-xl p-6 text-center">
                        <div class="flex justify-center items-center mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="w-20 h-20">
                                <circle cx="50" cy="50" r="40" fill="#FFD1D1" />
                                <circle cx="35" cy="40" r="6" fill="#333" />
                                <circle cx="65" cy="40" r="6" fill="#333" />
                                <path d="M35 65c5 10 25 10 30 0" stroke="#333" stroke-width="3" fill="none" stroke-linecap="round" id="character-mouth" class="mouth" />
                            </svg>
                        </div>

                        <button id="play-sound" class="sound-button bg-indigo-600 text-white font-bold py-3 px-6 rounded-full hover:bg-indigo-700 transition-all duration-300 flex items-center mx-auto mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
                            </svg>
                            æ’­æ”¾ç™¼éŸ³
                        </button>

                        <div id="sound-wave" class="sound-wave hidden mb-4">
                            <span></span>
                            <span></span>
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>

                        <div id="current-symbol" class="hidden">
                            <span class="text-5xl font-bold text-indigo-800">?</span>
                        </div>
                    </div>
                </div>

                <div id="options-container" class="grid grid-cols-2 gap-4">
                    </div>

                <div id="feedback-area" class="mt-6 text-center hidden">
                    <div id="correct-feedback" class="bg-green-100 text-green-800 p-4 rounded-xl hidden">
                        <p class="text-xl font-bold">å¤ªæ£’äº†ï¼ç­”å°äº†ï¼</p>
                        <p>ç¹¼çºŒä¿æŒï¼</p>
                    </div>
                    <div id="incorrect-feedback" class="bg-red-100 text-red-800 p-4 rounded-xl hidden">
                        <p class="text-xl font-bold">å†è©¦ä¸€æ¬¡ï¼</p>
                        <p>æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š<span id="correct-answer" class="font-bold"></span></p>
                    </div>
                </div>
            </div>

            <div id="level-complete" class="hidden text-center py-10">
                <div class="mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="w-32 h-32 mx-auto">
                        <circle cx="100" cy="90" r="70" fill="#FFD1D1" />
                        <circle cx="70" cy="80" r="10" fill="#333" />
                        <circle cx="130" cy="80" r="10" fill="#333" />
                        <path d="M70 120c10 20 50 20 60 0" stroke="#333" stroke-width="3" fill="none" stroke-linecap="round" />
                        <path d="M40 50 C 50 30, 70 20, 100 20 C 130 20, 150 30, 160 50" stroke="#FF9999" stroke-width="5" fill="none" stroke-linecap="round" />
                    </svg>
                </div>
                <h2 class="text-3xl font-bold text-indigo-800 mb-4">æ­å–œå®Œæˆé—œå¡ï¼</h2>
                <div class="flex justify-center mb-6">
                    <div id="result-stars" class="flex">
                        <span class="star text-yellow-400 text-3xl mx-2">â˜…</span>
                        <span class="star text-yellow-400 text-3xl mx-2">â˜…</span>
                        <span class="star text-yellow-400 text-3xl mx-2">â˜…</span>
                    </div>
                </div>
                <p id="final-score" class="text-xl text-gray-700 mb-8">ä½ ç²å¾—äº† <span class="font-bold text-indigo-700">0</span> åˆ†ï¼</p>
                <div class="flex justify-center space-x-4">
                    <button id="replay-level" class="bg-indigo-500 text-white font-bold py-3 px-6 rounded-full hover:bg-indigo-600 transition-all duration-300">
                        å†ç©ä¸€æ¬¡
                    </button>
                    <button id="next-level" class="bg-gradient-to-r from-green-500 to-blue-500 text-white font-bold py-3 px-6 rounded-full hover:shadow-lg transition-all duration-300">
                        ä¸‹ä¸€é—œ
                    </button>
                </div>
            </div>
        </div>

        <div class="mt-6 text-center text-gray-600">
            <p>æ³¨éŸ³ç¬¦è™Ÿè½åŠ›éŠæˆ² BY JOE</p>
        </div>
    </div>

    <audio id="c_01" src="assets/sounds/F1.wav" preload="auto"></audio><!- ã„…-->
    <audio id="c_02" src="assets/sounds/F2.wav" preload="auto"></audio><!- ã„†-->
    <audio id="c_03" src="assets/sounds/F3.wav" preload="auto"></audio><!- ã„‡-->
    <audio id="c_04" src="assets/sounds/F4.wav" preload="auto"></audio><!- ã„ˆ-->
    <audio id="c_05" src="assets/sounds/F5.wav" preload="auto"></audio><!- ã„‰-->
    <audio id="c_06" src="assets/sounds/F6.wav" preload="auto"></audio><!- ã„Š-->
    <audio id="c_07" src="assets/sounds/F7.wav" preload="auto"></audio><!- ã„‹-->
    <audio id="c_08" src="assets/sounds/F8.wav" preload="auto"></audio><!- ã„Œ-->
    <audio id="c_09" src="assets/sounds/F9.wav" preload="auto"></audio><!- ã„-->

    <audio id="c_10" src="assets/sounds/F10.wav" preload="auto"></audio><!- ã„-->
    <audio id="c_11" src="assets/sounds/F11.wav" preload="auto"></audio><!- ã„-->
    <audio id="c_12" src="assets/sounds/F12.wav" preload="auto"></audio><!- ã„-->
    <audio id="c_13" src="assets/sounds/F13.wav" preload="auto"></audio><!- ã„‘-->
    <audio id="c_14" src="assets/sounds/F14.wav" preload="auto"></audio><!- ã„’-->
    <audio id="c_15" src="assets/sounds/F15.wav" preload="auto"></audio><!- ã„“-->
    <audio id="c_16" src="assets/sounds/F16.wav" preload="auto"></audio><!- ã„”-->
    <audio id="c_17" src="assets/sounds/F17.wav" preload="auto"></audio><!- ã„•-->
    <audio id="c_18" src="assets/sounds/F18.wav" preload="auto"></audio><!- ã„–-->
    <audio id="c_19" src="assets/sounds/F19.wav" preload="auto"></audio><!- ã„—-->

    <audio id="c_20" src="assets/sounds/F20.wav" preload="auto"></audio><!- ã„˜-->
    <audio id="c_21" src="assets/sounds/F21.wav" preload="auto"></audio><!- ã„™-->
    <audio id="c_22" src="assets/sounds/F22.wav" preload="auto"></audio><!- ã„š-->
    <audio id="c_23" src="assets/sounds/F23.wav" preload="auto"></audio><!- ã„›-->
    <audio id="c_24" src="assets/sounds/F24.wav" preload="auto"></audio><!- ã„œ-->
    <audio id="c_25" src="assets/sounds/F25.wav" preload="auto"></audio><!- ã„-->
    <audio id="c_26" src="assets/sounds/F26.wav" preload="auto"></audio><!- ã„-->
    <audio id="c_27" src="assets/sounds/F27.wav" preload="auto"></audio><!- ã„Ÿ-->
    <audio id="c_28" src="assets/sounds/F28.wav" preload="auto"></audio><!- ã„ -->
    <audio id="c_29" src="assets/sounds/F29.wav" preload="auto"></audio><!- ã„¡-->

    <audio id="c_30" src="assets/sounds/F30.wav" preload="auto"></audio><!- ã„¢-->
    <audio id="c_31" src="assets/sounds/F31.wav" preload="auto"></audio><!- ã„£-->
    <audio id="c_32" src="assets/sounds/F32.wav" preload="auto"></audio><!- ã„¤-->
    <audio id="c_33" src="assets/sounds/F33.wav" preload="auto"></audio><!- ã„¥-->
    <audio id="c_34" src="assets/sounds/F34.wav" preload="auto"></audio><!- ã„¦-->
    <audio id="c_35" src="assets/sounds/F35.wav" preload="auto"></audio><!- ã„§-->
    <audio id="c_36" src="assets/sounds/F36.wav" preload="auto"></audio><!- ã„¨-->
    <audio id="c_37" src="assets/sounds/F37.wav" preload="auto"></audio><!- ã„©-->

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // ==========================================
            //  éŠæˆ²ç‹€æ…‹èˆ‡æ•¸æ“š
            // ==========================================
            const gameState = {
                currentLevel: 1,           // ç›®å‰é—œå¡ç·¨è™Ÿ
                score: 0,                  // ç©å®¶åˆ†æ•¸
                progress: 0,               // é—œå¡é€²åº¦ï¼ˆ0-100%ï¼‰
                totalQuestions: 10,        // æ¯é—œç¸½å•é¡Œæ•¸
                currentQuestion: 0,        // ç›®å‰å•é¡Œç´¢å¼•
                correctAnswers: 0,         // æ­£ç¢ºç­”é¡Œæ•¸
                stars: 0,                  // ç²å¾—çš„æ˜Ÿæ˜Ÿæ•¸
                currentSymbol: null,       // ç•¶å‰å•é¡Œçš„æ­£ç¢ºæ³¨éŸ³ç¬¦è™Ÿ
                isPlaying: false,          // è²éŸ³æ˜¯å¦æ­£åœ¨æ’­æ”¾
                levels: {                  // é—œå¡è³‡æ–™é…ç½®
                    1: {
                        title: "ç¬¬ä¸€é—œï¼šã„…ã„†ã„‡ã„ˆ",
                        symbols: ["ã„…", "ã„†", "ã„‡", "ã„ˆ"],
                        symbolsA: ["c_01", "c_02", "c_03", "c_04"],
                        words: {
                            "ã„…": ["çˆ¸", "æ¯", "å¸ƒ", "æ¯”"],
                            "ã„†": ["æ‹", "è·‘", "ç¢°", "æ³¡"],
                            "ã„‡": ["åª½", "è²·", "ç±³", "å¸½"],
                            "ã„ˆ": ["ç™¼", "é£›", "æ–¹", "æ”¾"]
                        },
                        unlocked: true,    // é è¨­ç¬¬ä¸€é—œè§£é–
                        completed: false,
                        stars: 0
                    },
                    2: {
                        title: "ç¬¬äºŒé—œï¼šã„‰ã„Šã„‹ã„Œ",
                        symbols: ["ã„‰", "ã„Š", "ã„‹", "ã„Œ"],
                        symbolsA: ["c_05", "c_06", "c_07", "c_08"],
                        words: {
                            "ã„‰": ["å¤§", "é›»", "é»", "å¼Ÿ"],
                            "ã„Š": ["ä»–", "å¤©", "è·³", "è½"],
                            "ã„‹": ["ä½ ", "å¥¶", "å¹´", "é³¥"],
                            "ã„Œ": ["ä¾†", "äº†", "è·¯", "è—"]
                        },
                        unlocked: true,
                        completed: false,
                        stars: 0
                    },
                    3: {
                        title: "ç¬¬ä¸‰é—œï¼šã„ã„ã„",
                        symbols: ["ã„", "ã„", "ã„"],
                        symbolsA: ["c_09", "c_10", "c_11"],
                        words: {
                            "ã„": ["å“¥", "ç‹—", "é«˜", "æœ"],
                            "ã„": ["é–‹", "çœ‹", "å£", "å¿«"],
                            "ã„": ["å¥½", "å–", "èŠ±", "ç«"]
                        },
                        unlocked: true,
                        completed: false,
                        stars: 0
                    },
                    4: {
                        title: "ç¬¬å››é—œï¼šã„ã„‘ã„’",
                        symbols: ["ã„", "ã„‘", "ã„’"],
                        symbolsA: ["c_12", "c_13", "c_14"],
                        words: {
                            "ã„": ["å®¶", "é›", "è¦‹", "å«"],
                            "ã„‘": ["å»", "æ°£", "å‰", "è¦ª"],
                            "ã„’": ["ä¸‹", "å°", "å­¸", "å¿ƒ"]
                        },
                        unlocked: false,   // é è¨­ç¬¬å››é—œæœªè§£é–
                        completed: false,
                        stars: 0
                    },
                    5: {
                        title: "ç¬¬äº”é—œï¼šã„“ã„”ã„•ã„–",
                        symbols: ["ã„“", "ã„”", "ã„•", "ã„–"],
                        symbolsA: ["c_15", "c_16", "c_17", "c_18"],
                        words: {
                            "ã„“": ["çŸ¥", "è±¬", "ç´™", "ä¸­"],
                            "ã„”": ["åƒ", "å‡º", "è»Š", "é•·"],
                            "ã„•": ["æ˜¯", "æ™‚", "æ›¸", "å±±"],
                            "ã„–": ["æ—¥", "è‚‰", "ç†±", "äºº"]
                        },
                        unlocked: false,
                        completed: false,
                        stars: 0
                    },
                    6: {
                        title: "ç¬¬å…­é—œï¼šã„—ã„˜ã„™",
                        symbols: ["ã„—", "ã„˜", "ã„™"],
                        symbolsA: ["c_19", "c_20", "c_21"],
                        words: {
                            "ã„—": ["å­—", "è‡ª", "èµ°", "å"],
                            "ã„˜": ["å¾", "èœ", "è‰", "æ¬¡"],
                            "ã„™": ["å››", "ä¸‰", "é€", "çµ²"]
                        },
                        unlocked: false,
                        completed: false,
                        stars: 0
                    },
                    7: {
                        title: "ç¬¬ä¸ƒé—œï¼šã„šã„›ã„œ",
                        symbols: ["ã„š", "ã„›", "ã„œ"],
                        symbolsA: ["c_22", "c_23", "c_24"],
                        words: {
                            "ã„š": ["å­—", "è‡ª", "èµ°", "å"],
                            "ã„›": ["å¾", "èœ", "è‰", "æ¬¡"],
                            "ã„œ": ["å››", "ä¸‰", "é€", "çµ²"]
                        },
                        unlocked: false,
                        completed: false,
                        stars: 0
                    },
                    8: {
                        title: "ç¬¬å…«é—œï¼šã„ã„ã„Ÿã„ ã„¡",
                        symbols: ["ã„", "ã„", "ã„Ÿ", "ã„ ", "ã„¡"],
                        symbolsA: ["c_25", "c_26", "c_27", "c_28", "c_29"],
                        words: {
                            "ã„": ["å­—", "è‡ª", "èµ°", "å"],
                            "ã„": ["å¾", "èœ", "è‰", "æ¬¡"],
                            "ã„Ÿ": ["å››", "ä¸‰", "é€", "çµ²"],
                            "ã„ ": ["å››", "ä¸‰", "é€", "çµ²"],
                            "ã„¡": ["å››", "ä¸‰", "é€", "çµ²"]
                        },
                        unlocked: false,
                        completed: false,
                        stars: 0
                    },
                    9: {
                        title: "ç¬¬ä¹é—œï¼šã„¢ã„£ã„¤ã„¥ã„¦ã„§ã„¨ã„©",
                        symbols: ["ã„¢", "ã„£", "ã„¤", "ã„¥", "ã„¦", "ã„§", "ã„¨", "ã„©"],
                        symbolsA: ["c_30", "c_31", "c_32", "c_33", "c_34", "c_35", "c_36", "c_37"],
                        words: {
                            "ã„¢": ["å­—", "è‡ª", "èµ°", "å"],
                            "ã„£": ["å¾", "èœ", "è‰", "æ¬¡"],
                            "ã„¤": ["å››", "ä¸‰", "é€", "çµ²"],
                            "ã„¥": ["å››", "ä¸‰", "é€", "çµ²"],
                            "ã„¦": ["å››", "ä¸‰", "é€", "çµ²"],
                            "ã„§": ["å››", "ä¸‰", "é€", "çµ²"],
                            "ã„¨": ["å››", "ä¸‰", "é€", "çµ²"],
                            "ã„©": ["å››", "ä¸‰", "é€", "çµ²"]
                        },
                        unlocked: false,
                        completed: false,
                        stars: 0
                    }
                },
                currentQuestions: []    // ç•¶å‰é—œå¡çš„å•é¡Œåˆ—è¡¨
            };

            // ==========================================
            //  DOM å…ƒç´ å­˜å–
            // ==========================================
            const startScreen = document.getElementById('start-screen');
            const levelSelect = document.getElementById('level-select');
            const gameScreen = document.getElementById('game-screen');
            const levelComplete = document.getElementById('level-complete');
            const startButton = document.getElementById('start-button');
            const backToStart = document.getElementById('back-to-start');
            const backToLevels = document.getElementById('back-to-levels');
            const levelButtons = document.querySelectorAll('.level-button');
            const levelTitle = document.getElementById('level-title');
            const scoreDisplay = document.getElementById('score-display');
            const progressBar = document.getElementById('progress-bar');
            const playSound = document.getElementById('play-sound');
            const soundWave = document.getElementById('sound-wave');
            const currentSymbol = document.getElementById('current-symbol');
            const optionsContainer = document.getElementById('options-container');
            const feedbackArea = document.getElementById('feedback-area');
            const correctFeedback = document.getElementById('correct-feedback');
            const incorrectFeedback = document.getElementById('incorrect-feedback');
            const correctAnswer = document.getElementById('correct-answer');
            const finalScore = document.getElementById('final-score');
            const replayLevel = document.getElementById('replay-level');
            const nextLevel = document.getElementById('next-level');
            const levelStars = document.getElementById('level-stars');
            const resultStars = document.getElementById('result-stars');
            const guideSpeech = document.getElementById('guide-speech');
            const characterMouth = document.getElementById('character-mouth');

            // ==========================================
            //  äº‹ä»¶ç›£è½å™¨
            // ==========================================
            startButton.addEventListener('click', showLevelSelect);
            backToStart.addEventListener('click', showStartScreen);
            backToLevels.addEventListener('click', showLevelSelect);
            replayLevel.addEventListener('click', () => startLevel(gameState.currentLevel));
            nextLevel.addEventListener('click', startNextLevel);
            playSound.addEventListener('click', playCurrentSound);

            levelButtons.forEach(button => {
                if (!button.classList.contains('locked')) {
                    button.addEventListener('click', () => {
                        const level = parseInt(button.getAttribute('data-level'));
                        startLevel(level);
                    });

                    // é—œå¡æŒ‰éˆ•æ»‘å…¥/æ»‘å‡ºæ™‚é¡¯ç¤ºæç¤ºè¨Šæ¯
                    button.addEventListener('mouseenter', () => {
                        const level = parseInt(button.getAttribute('data-level'));
                        showGuideSpeech(`ç¬¬${level}é—œï¼šè½è½${gameState.levels[level].title.split('ï¼š')[1]}çš„ç™¼éŸ³ï¼`);
                    });
                    button.addEventListener('mouseleave', () => {
                        hideGuideSpeech();
                    });
                } else {
                    button.addEventListener('mouseenter', () => {
                        showGuideSpeech("é€™å€‹é—œå¡é‚„æ²’è§£é–å“¦ï¼å…ˆå®Œæˆå‰é¢çš„é—œå¡å§ï¼");
                    });
                    button.addEventListener('mouseleave', () => {
                        hideGuideSpeech();
                    });
                }
            });

            // ==========================================
            //  æ ¸å¿ƒéŠæˆ²åŠŸèƒ½å‡½æ•¸
            // ==========================================

            /**
             * é¡¯ç¤ºé–‹å§‹ç•«é¢
             */
            function showStartScreen() {
                startScreen.classList.remove('hidden');
                levelSelect.classList.add('hidden');
                gameScreen.classList.add('hidden');
                levelComplete.classList.add('hidden');
            }

            /**
             * é¡¯ç¤ºé—œå¡é¸æ“‡ç•«é¢ï¼Œä¸¦æ›´æ–°é—œå¡æŒ‰éˆ•ç‹€æ…‹
             */
            function showLevelSelect() {
                startScreen.classList.add('hidden');
                levelSelect.classList.remove('hidden');
                gameScreen.classList.add('hidden');
                levelComplete.classList.add('hidden');
                updateLevelButtons();
            }

            /**
             * æ ¹æ“šéŠæˆ²é€²åº¦æ›´æ–°é—œå¡æŒ‰éˆ•çš„é–å®šç‹€æ…‹èˆ‡æ˜Ÿæ˜Ÿæ•¸
             */
            function updateLevelButtons() {
                levelButtons.forEach(button => {
                    const level = parseInt(button.getAttribute('data-level'));
                    const levelData = gameState.levels[level];

                    if (levelData.unlocked) {
                        button.classList.remove('locked');

                        // æ›´æ–°æ˜Ÿæ˜Ÿé¡¯ç¤º
                        const stars = button.querySelectorAll('.star');
                        for (let i = 0; i < stars.length; i++) {
                            if (i < levelData.stars) {
                                stars[i].classList.add('earned');
                            } else {
                                stars[i].classList.remove('earned');
                            }
                        }
                    }
                });
            }

            /**
             * é¡¯ç¤ºè§’è‰²å¼•å°å°è©±æ¡†
             * @param {string} text - è¦é¡¯ç¤ºçš„è¨Šæ¯
             */
            function showGuideSpeech(text) {
                guideSpeech.textContent = text;
                guideSpeech.style.opacity = '1';
            }

            /**
             * éš±è—è§’è‰²å¼•å°å°è©±æ¡†
             */
            function hideGuideSpeech() {
                guideSpeech.style.opacity = '0';
            }

            /**
             * é–‹å§‹ä¸€å€‹æ–°çš„é—œå¡
             * @param {number} level - é—œå¡ç·¨è™Ÿ
             */
            function startLevel(level) {
                gameState.currentLevel = level;
                gameState.score = 0;
                gameState.progress = 0;
                gameState.currentQuestion = 0;
                gameState.correctAnswers = 0;

                // ç”¢ç”Ÿæœ¬é—œå¡çš„å•é¡Œ
                generateQuestions(level);

                // æ›´æ–°éŠæˆ²ä»‹é¢é¡¯ç¤º
                levelTitle.textContent = gameState.levels[level].title;
                scoreDisplay.textContent = gameState.score;
                progressBar.style.width = '0%';

                // é¡¯ç¤ºéŠæˆ²ç•«é¢
                startScreen.classList.add('hidden');
                levelSelect.classList.add('hidden');
                gameScreen.classList.remove('hidden');
                levelComplete.classList.add('hidden');

                // é¡¯ç¤ºç¬¬ä¸€å€‹å•é¡Œ
                showQuestion();
            }

            /**
             * ç‚ºç•¶å‰é—œå¡ç”Ÿæˆéš¨æ©Ÿå•é¡Œåˆ—è¡¨
             * @param {number} level - é—œå¡ç·¨è™Ÿ
             */
            function generateQuestions(level) {
                const levelData = gameState.levels[level];
                gameState.currentQuestions = [];

                // ç”¢ç”Ÿç¸½é¡Œæ•¸çš„å•é¡Œ
                for (let i = 0; i < gameState.totalQuestions; i++) {
                    const randomSymbolIndex = Math.floor(Math.random() * levelData.symbols.length);
                    const symbol = levelData.symbols[randomSymbolIndex];
                    const symbolA = levelData.symbolsA[randomSymbolIndex];

                    gameState.currentQuestions.push({
                        symbol: symbol,
                        symbolA: symbolA,
                        options: getRandomOptions(levelData.symbols, symbol)
                    });
                }
                // æ‰“äº‚å•é¡Œé †åº
                shuffleArray(gameState.currentQuestions);
            }

            /**
             * å¾æ‰€æœ‰ç¬¦è™Ÿä¸­éš¨æ©Ÿé¸æ“‡ä¸‰å€‹ä½œç‚ºéŒ¯èª¤é¸é …
             * @param {Array<string>} allSymbols - æ‰€æœ‰æ³¨éŸ³ç¬¦è™Ÿ
             * @param {string} correctSymbol - æ­£ç¢ºçš„æ³¨éŸ³ç¬¦è™Ÿ
             * @returns {Array<string>} - åŒ…å«ä¸€å€‹æ­£ç¢ºç­”æ¡ˆå’Œä¸‰å€‹éŒ¯èª¤ç­”æ¡ˆçš„é™£åˆ—
             */
            function getRandomOptions(allSymbols, correctSymbol) {
                const options = [correctSymbol];
                const availableSymbols = allSymbols.filter(s => s !== correctSymbol);

                // åŠ å…¥ä¸‰å€‹éš¨æ©Ÿçš„éŒ¯èª¤é¸é …
                while (options.length < 4 && availableSymbols.length > 0) {
                    const randomIndex = Math.floor(Math.random() * availableSymbols.length);
                    options.push(availableSymbols[randomIndex]);
                    availableSymbols.splice(randomIndex, 1);
                }

                // æ‰“äº‚é¸é …é †åº
                shuffleArray(options);
                return options;
            }

            /**
             * é¡¯ç¤ºç•¶å‰å•é¡Œçš„é¸é …
             */
            function showQuestion() {
                if (gameState.currentQuestion >= gameState.totalQuestions) {
                    // å¦‚æœæ‰€æœ‰å•é¡Œéƒ½å›ç­”å®Œç•¢ï¼Œå‰‡å®Œæˆé—œå¡
                    completeLevel();
                    return;
                }

                const question = gameState.currentQuestions[gameState.currentQuestion];
                gameState.currentSymbol = question.symbol;

                // éš±è—å›é¥‹è¨Šæ¯
                feedbackArea.classList.add('hidden');
                correctFeedback.classList.add('hidden');
                incorrectFeedback.classList.add('hidden');

                // éš±è—è²æ³¢
                //soundWave.classList.add('hidden');
                currentSymbol.classList.add('hidden');

                // å‹•æ…‹ç”Ÿæˆé¸é …æŒ‰éˆ•
                optionsContainer.innerHTML = '';
                question.options.forEach((option) => {
                    const button = document.createElement('div');
                    button.className = 'symbol-card bg-white rounded-xl p-4 shadow-md text-center';
                    button.innerHTML = `<span class="text-4xl font-bold">${option}</span>`;
                    button.addEventListener('click', () => checkAnswer(option));
                    optionsContainer.appendChild(button);
                });
            }

            /**
             * æ’­æ”¾ç•¶å‰å•é¡Œçš„è²éŸ³
             */
            function playCurrentSound() {
                if (gameState.isPlaying) return;

                gameState.isPlaying = true;

                // é¡¯ç¤ºè²æ³¢ä¸¦è§¸ç™¼è§’è‰²å˜´å·´å‹•ç•«
                //soundWave.classList.remove('hidden');
                characterMouth.classList.add('speaking');
                const questionA = gameState.currentQuestions[gameState.currentQuestion];
                document.getElementById(questionA.symbolA).play();

                // æ¨¡æ“¬è²éŸ³æ’­æ”¾çµæŸ
                setTimeout(() => {
                    gameState.isPlaying = false;
                    //soundWave.classList.add('hidden');
                    characterMouth.classList.remove('speaking');
                }, 2000);
            }

            /**
             * æª¢æŸ¥ä½¿ç”¨è€…é¸æ“‡çš„ç­”æ¡ˆæ˜¯å¦æ­£ç¢º
             * @param {string} selectedOption - ä½¿ç”¨è€…é¸æ“‡çš„æ³¨éŸ³ç¬¦è™Ÿ
             */
            function checkAnswer(selectedOption) {
                const isCorrect = selectedOption === gameState.currentSymbol;

                // æ‰¾åˆ°ä½¿ç”¨è€…é»æ“Šçš„å¡ç‰‡
                const buttons = optionsContainer.querySelectorAll('.symbol-card');
                let selectedButton;
                buttons.forEach(button => {
                    if (button.textContent.trim() === selectedOption) {
                        selectedButton = button;
                    }
                });

                if (isCorrect) {
                    // ç­”å°é‚è¼¯
                    selectedButton.classList.add('correct');
                    gameState.score += 10;
                    gameState.correctAnswers++;
                    scoreDisplay.textContent = gameState.score;
                    feedbackArea.classList.remove('hidden');
                    correctFeedback.classList.remove('hidden');
                    createConfetti(); // ç­”å°æ™‚ç”¢ç”Ÿç´™å±‘
                } else {
                    // ç­”éŒ¯é‚è¼¯
                    selectedButton.classList.add('incorrect');
                    feedbackArea.classList.remove('hidden');
                    incorrectFeedback.classList.remove('hidden');
                    correctAnswer.textContent = gameState.currentSymbol;
                }

                // ç¦ç”¨æ‰€æœ‰é¸é …æŒ‰éˆ•ï¼Œé˜²æ­¢é‡è¤‡é»æ“Š
                buttons.forEach(button => {
                    button.style.pointerEvents = 'none';
                });

                // å»¶é²ä¸€æ®µæ™‚é–“å¾Œé€²å…¥ä¸‹ä¸€é¡Œ
                setTimeout(() => {
                    gameState.currentQuestion++;
                    gameState.progress = (gameState.currentQuestion / gameState.totalQuestions) * 100;
                    progressBar.style.width = `${gameState.progress}%`;
                    showQuestion();
                }, 2000);
            }

            /**
             * å®Œæˆé—œå¡ï¼Œè¨ˆç®—åˆ†æ•¸èˆ‡æ˜Ÿæ˜Ÿ
             */
            function completeLevel() {
                // æ ¹æ“šæ­£ç¢ºç‡è¨ˆç®—æ˜Ÿæ˜Ÿæ•¸
                const percentage = (gameState.correctAnswers / gameState.totalQuestions) * 100;
                let stars = 0;
                if (percentage >= 90) {
                    stars = 3;
                } else if (percentage >= 70) {
                    stars = 2;
                } else if (percentage >= 50) {
                    stars = 1;
                }

                // æ›´æ–°é—œå¡æ•¸æ“š
                gameState.levels[gameState.currentLevel].completed = true;
                // åƒ…åœ¨ç²å¾—æ›´å¤šæ˜Ÿæ˜Ÿæ™‚æ›´æ–°è¨˜éŒ„
                gameState.levels[gameState.currentLevel].stars = Math.max(stars, gameState.levels[gameState.currentLevel].stars);

                // è§£é–ä¸‹ä¸€é—œ
                if (gameState.currentLevel < Object.keys(gameState.levels).length) {
                    gameState.levels[gameState.currentLevel + 1].unlocked = true;
                }

                // æ›´æ–°å®Œæˆç•«é¢çš„UI
                finalScore.innerHTML = `ä½ ç²å¾—äº† <span class="font-bold text-indigo-700">${gameState.score}</span> åˆ†ï¼`;
                const resultStarsElements = resultStars.querySelectorAll('.star');
                for (let i = 0; i < resultStarsElements.length; i++) {
                    if (i < stars) {
                        resultStarsElements[i].classList.add('earned');
                    } else {
                        resultStarsElements[i].classList.remove('earned');
                    }
                }

                // åˆ¤æ–·æ˜¯å¦éš±è—ã€Œä¸‹ä¸€é—œã€æŒ‰éˆ•
                if (gameState.currentLevel >= Object.keys(gameState.levels).length) {
                    nextLevel.classList.add('hidden');
                } else {
                    nextLevel.classList.remove('hidden');
                }

                // é¡¯ç¤ºé—œå¡å®Œæˆç•«é¢ä¸¦ç”¢ç”Ÿæ…¶ç¥ç´™å±‘
                gameScreen.classList.add('hidden');
                levelComplete.classList.remove('hidden');
                createCelebrationConfetti();
            }

            /**
             * é€²å…¥ä¸‹ä¸€é—œ
             */
            function startNextLevel() {
                if (gameState.currentLevel < Object.keys(gameState.levels).length) {
                    startLevel(gameState.currentLevel + 1);
                } else {
                    showLevelSelect();
                }
            }

            /**
             * ç”¢ç”Ÿå°‘é‡ç´™å±‘æ•ˆæœ
             */
            function createConfetti() {
                const confettiCount = 30;
                const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
                for (let i = 0; i < confettiCount; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.animation = `fall ${1 + Math.random() * 2}s linear forwards`;
                    document.getElementById('game-container').appendChild(confetti);
                    setTimeout(() => { confetti.remove(); }, 3000);
                }
            }

            /**
             * ç”¢ç”Ÿå¤§é‡ç´™å±‘æ•ˆæœï¼ˆé—œå¡å®Œæˆæ™‚ä½¿ç”¨ï¼‰
             */
            function createCelebrationConfetti() {
                const confettiCount = 100;
                const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
                for (let i = 0; i < confettiCount; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.animation = `fall ${1 + Math.random() * 3}s linear forwards`;
                    document.getElementById('game-container').appendChild(confetti);
                    setTimeout(() => { confetti.remove(); }, 4000);
                }
            }

            // ==========================================
            //  é€šç”¨å·¥å…·å‡½æ•¸
            // ==========================================

            /**
             * æ‰“äº‚é™£åˆ—é †åº
             * @param {Array<any>} array - è¦æ‰“äº‚çš„é™£åˆ—
             * @returns {Array<any>} - å·²æ‰“äº‚çš„é™£åˆ—
             */
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // ==========================================
            //  éŠæˆ²åˆå§‹åŒ–
            // ==========================================
            showStartScreen();
        });
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'9353f54a23896a80',t:'MTc0NTQ4MDQ4NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>
</html>
